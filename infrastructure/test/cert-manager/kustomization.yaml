bases:
  - ../../base/cert-manager/
patches:
  - target:
      kind: ClusterIssuer
      name: letsencrypt-staging
    patch: |-
      - op: replace
        path: /spec/acme/email
        value: samuel.baumgartner@gmail.com
      - op: replace
        path: /spec/acme/solvers/0/dns01/cloudflare/email
        value: samuel.baumgartner@gmail.com
  - target:
      kind: ClusterIssuer
      name: letsencrypt-production
    patch: |-
      - op: replace
        path: /spec/acme/email
        value: samuel.baumgartner@gmail.com
      - op: replace
        path: /spec/acme/solvers/0/dns01/cloudflare/email
        value: samuel.baumgartner@gmail.com
  - target:
      kind: SealedSecret
      name: cloudflare-api-token-secret
    patch: |-
      - op: replace
        path: /spec/encryptedData/api-token
        value: AgCP4zFAHKTv1B+x58aqEBVflpYGaGMGaUQLQPAji5Bmdx97WuvwtG4uoNGRNYsfvDIDvknzH6jrELHg1NyBjLcElxgFmyIXUWEmtU5IonsrqWn9TNJ9nLG53BzCK7+RCwA8P9WCFG/l87+4sKG8SgiO0094Bevgja9K/Whjx06f0op9q9bCk6oMvMprzvxihBK10biNCe8hC7H7wT1DhPGMpEICetwz++F9vuP13Gm1kF2/Z9kUxtaLH1+Rs9qLcqohWmKOwwRsRnKx7MQYCZGN9t8logkU07Tap+LpIAK9ul5eMwkhhxuvTOsQ8hAj356klln/gE+hQo77Zo4mJDuSiHyDAB2geez5lSL3yww06OhtfYAZGHjGYjm5lQ0bW0OTUAqhDcWAO+2kAfdAaRTE0N8dBIOTGCkvjDFQ3fqmVRqU4yrk9mmfnjcUigoe6hFpJDTaOtFNGvXoYRfv/o+6lqIYKFRiRiFf+1ncYsxP3Lbmt0kbtDS30t1LEu2z4KFM0XZuBg8rrpA20Ajgnd+YX/UbYtxu33Ws+d5C2r7c9h5WBpsIXUBMgxOCQHuL7CyPNgedsg8fBP5AcyvEFAmwQe1AyKVmUEptMRlfW/6fUkvfDrRC8BfUa1JEwBzkWc7iztkv8dyaOAN7UQHF/X9CJGLeIZ8ader8lgx8aj89ffxxqWk+YL34Iw1bg91kld+HAGTMNbZv8ELrZx7fPC4NHwxYJg1oKF/b2a0+68WwxXHxHdIeHOVb

# kubectl create secret generic cloudflare-api-token-secret -n cert-manager --dry-run=client --from-literal=api-token=mysecretvalue -o yaml | \
# kubeseal \
#   --controller-name=sealed-secrets-controller \
#   --controller-namespace=flux-system \
#   --format yaml > letsencrypt-secret-temp.yaml
